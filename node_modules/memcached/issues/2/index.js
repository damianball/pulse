
var nMemcached = require( '../../' )
  , fs = require('fs')
  , zlib = require('zlib')
  , memcached;

var content = fs.readFileSync(__dirname + '/../../examples/binary/lipsum.txt')
  , compressed = zlib.deflate(content);
// connect to our memcached server on host 10.211.55.5, port 11211
memcached = new nMemcached('10.211.55.5:11211');

memcached.set( 'issue_2', compressed, 3600, function( err, result ){
  if (err) console.error('set err', err);

  memcached.get( 'issue_2', function( err, result ){
    // error reporting
      if(err) console.error('get err', err);
      if(result.toString('ascii') !== compressed.toString('ascii')) console.log('get res wrong', result.length, compressed.length);
      else console.log('got a match')
      // progress reporting
  });
});
